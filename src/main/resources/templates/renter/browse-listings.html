<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
    <!--Required Meta tags-->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Favicon -->
    <link th:href="@{/img/favicon.png}" rel="icon">
    <i class="fa-solid fa-house"></i>

    <!--Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">

    <!-- Bootstrap Font Icon CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">

    <!-- Custom CSS Stylesheet -->
    <link th:href="@{/css/style.css}" rel="stylesheet"/>

    <title> Renter - Browse Listings </title>

</head>
<body>

<!--Header Fragment-->
<header th:replace="fragments/header.html :: header"></header>

<div class="container d-flex mt-50 mb-50">

</div>

<!--Listings-->
<div class="container">
    <h1 class="text-center">Browse listings</h1>
    <table class="table table-striped table-responsive-md">
        <!--Search and advanced filtering-->
        <thead>
        <tr>
            <th>
                <a th:href="@{'/renter/browse-listings/' + ${currentPage} + '?sortField=title&sortBy=' + ${reverseSortBy}}">
                    Title</a>
            </th>
            <th>
                <a th:href="@{'/renter/browse-listings/' + ${currentPage} + '?sortField=rent&sortBy=' + ${reverseSortBy}}">
                    Rent</a>
            </th>
    </table>
    <div class="row">
        <div class="col-xxl-5 col-xl-6 col-lg-7 col-md-8 col-sm-9">

            <div class="card mt-3" style="max-width: 700px;" th:each="listing : ${displayListings}">
                <div class="row g-0">
                    <div class="col-md-12">
                        <img th:src="@{/img/room-3.jpg}" class="img-fluid" alt="...">
                    </div>
                    <div class="col-md-12">
                        <div class="card-body">
                            <h5 class="card-title" th:text="${listing.title}"></h5>
                            <p class="text-small-muted">
                                <span>Ref#: </span>
                                <span th:text="${listing.getId()}"></span>
                            </p>

                            <p class="mt-3 mb-0 text-sm col-3">
                                <span class="card-text">Rent: <i class="bi bi-currency-euro"></i></span>
                                <span class="card-text" th:text="${listing.rent}"></span>
                            </p>

                            <p>
                                <span class="card-text">Type of room:</span>
                                <span class="card-text" th:text="${listing.roomType}"></span>
                            </p>

                            <p>
                                <span class="card-text">Number of housemates:</span>
                                <span class="card-text" th:text="${listing.housemates}"></span>
                            </p>
                            <p>
                                <span class="card-text" th:if="${listing.privateBathroom == true }">Private Bathroom</span>
                                <span class="card-text" th:unless="${listing.privateBathroom == true}"></span>
                            </p>

                            <p>
                                <span class="card-text" th:if="${listing.parking == true }">Have Parking</span>
                                <span class="card-text" th:unless="${listing.parking == true}">No Parking</span>
                            </p>


                            <p>
                                <span class="card-text">Created by:</span>
                                <span class="card-text" th:text="${listing.createdBy}"></span>
                            </p>
                            <p>
                                <span class="card-text">Created on:</span>
                                <span class="card-text" th:text="${listing.creationDate}"></span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="section">
    <div class="page-subheader sorting pl0 pr-10">

        <div th:if="${totalPages > 1}">
            <div class="row col-sm-10">
                <div class="col-sm-2">
                    Total Rows: [[${totalItems}]]
                </div>
                <div class="col-sm-1">
                            <span th:each="i: ${#numbers.sequence(1, totalPages)}">
                                <a th:if="${currentPage != i}"
                                   th:href="@{'/renter/browse-listings/' + ${i}
                                   + '?sortField=' + ${sortField} + '&sortBy=' + ${sortBy}}">[[${i}]]</a>
                                <span th:unless="${currentPage != i}">[[${i}]]</span>  &nbsp; &nbsp;</span>
                </div>
                <div class="col-sm-1">
                    <a th:if="${currentPage < totalPages}"
                       th:href="@{'/renter/browse-listings/' + ${currentPage + 1}
                               + '?sortField=' + ${sortField} + '&sortBy=' + ${sortBy}}">Next</a>
                    <span th:unless="${currentPage < totalPages}">Next</span>
                </div>

                <div class="col-sm-1">
                    <a th:if="${currentPage < totalPages}"
                       th:href="@{'/renter/browse-listings/' + ${totalPages}+ '?sortField=' + ${sortField} + '&sortBy=' + ${sortBy}}">Last</a>
                    <span th:unless="${currentPage < totalPages}">Last</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Footer Fragment-->
<footer th:replace="fragments/footer.html :: footer"></footer>

<!--Bootstrap Bundle (JavaScript and Popper)-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
        crossorigin="anonymous"></script>
</body>
</html>